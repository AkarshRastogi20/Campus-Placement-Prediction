# -*- coding: utf-8 -*-
"""app_py_with_flask.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/10M1pCW3dxlQo7L_7g1hqdB-1n_S3Agh8

**Create template folder and their files**
"""

# Create the template folder
!mkdir template

# Commented out IPython magic to ensure Python compatibility.
# # Create home.html file into template folder
# 
# %%writefile template/home.html
# 
# <!DOCTYPE html>
# <html lang="en">
# <head>
#     <title>Student Placement Prediction</title>
#     <meta name="viewport" content="width=device-width, initial-scale=1">
# <style>
# body {font-family: Arial, Helvetica, sans-serif;}
# * {box-sizing: border-box;}
# 
# input[type=text] {
#   width: 100%;
#   padding: 12px;
#   border: 1px solid #ccc;
#   border-radius: 4px;
#   box-sizing: border-box;
#   margin-top: 6px;
#   margin-bottom: 16px;
#   resize: vertical;
# }
# 
# input[type=submit] {
#   background-color: #4CAF50;
#   color: white;
#   padding: 12px 20px;
#   border: none;
#   border-radius: 4px;
#   cursor: pointer;
#   width: 230px;
# 
# }
# 
# input[type=submit]:hover {
#   background-color: #45a049;
# 
# }
# 
# .container {
#   border-radius: 5px;
#   background-color: #f2f2f2;
#   padding: 20px;
#   display: flex;
# }
# 
# .form_wrapper {
#   flex:1;
#   text-align: center;
# }
# 
# .selects{
#   width: 100%;
#   padding: 12px;
#   border: 1px solid #ccc;
#   border-radius: 4px;
#   box-sizing: border-box;
#   margin-top: 6px;
#   margin-bottom: 16px;
#   resize: vertical;
# }
# 
# </style>
# </head>
# <body>
# <div class="container">
#   <form action="/send", name="send_data", method="post">
# 
# 
# <div class="form-group">
#   <label for="gender">Gender</label>
#   <select name="gender" class = "selects" >
#     <option  value="M">Male</option>
#     <option value = "F">Female</option>
#   </select>
# </div>
# 
#     <label>Secondary Education Percentage - 10th Grade</label>
#     <input type="text"  name="ssc_p" placeholder="10th grade in percentage">
# 
# 
#     <label>Higher Secondary Education Percentage - 12th Grade</label>
#     <input type="text" name="hsc_p" placeholder="12th Percentage">
# 
# 
#     <div class="form-group">
#       <label for="hsc_s1">Specialization in Higher Secondary Education</label>
#       <select name="hsc_s1" class = "selects" >
#         <option  value="Commerce">Commerce</option>
#         <option value = "Science">Science</option>
#         <option value = "Others">Others</option>
#       </select>
#     </div>
# 
#     <label>Degree Percentage</label>
#     <input type="text" name="degree_p" placeholder="Degree percentage">
# 
# 
# 
#     <div class="form-group">
#       <label for="degree_t1">Under Graduation(Degree type)- Field of degree education</label>
#       <select name="degree_t1" class = "selects" >
#         <option  value="Sci&Tech">Sci&Tech</option>
#         <option value = "Comm&Mgmt">Comm&Mgmt</option>
#         <option value = "Arts">Arts</option>
#       </select>
#     </div>
# 
#     <div class="form-group">
#       <label for="workex1">Work Experience</label>
#       <select name="workex1" class = "selects" >
#         <option  value="No">No</option>
#         <option value = "Yes">Yes</option>
#       </select>
#     </div>
# 
#     <label>Employability test percentage ( conducted by college)</label>
#     <input type="text" name="etest_p" placeholder="in percentage">
# 
#     <div class="form-group">
#       <label for="specialisation1">Specialization</label>
#       <select name="specialisation1" class = "selects" >
#         <option  value="Mkt&HR">Mkt&HR</option>
#         <option value = "Mkt&Fin">Mkt&Fin</option>
#       </select>
#     </div>
# 
#     <label>MBA Percentage</label>
#     <input type="text" name="mba_p" placeholder="In percentage">
# 
# 
#     <div class="form_wrapper">
#        <input type="submit" value="Submit"/>
#     </div>
# 
#   </form>
# 
# 
# </div>
# </body>
# </html>

# Commented out IPython magic to ensure Python compatibility.
# # Create show.html file into template folder
# 
# %%writefile template/show.html
# 
# 
# <!DOCTYPE html>
# <html lang="en">
# <head>
#     <meta charset="UTF-8">
#     <title>display results</title>
#     <style>
#     h1 {
# 	margin: 1em 0 0.5em 0;
# 	color: #343434;
# 	font-weight: normal;
# 	font-family: 'Ultra', sans-serif;
# 	font-size: 36px;
# 	line-height: 42px;
# 	text-transform: uppercase;
# 	text-shadow: 0 2px white, 0 3px #777;
# 	text-align: center;
# }
# 
# h2 {
# 	margin: 1em 0 0.5em 0;
# 	color: #343434;
# 	font-weight: normal;
# 	font-size: 30px;
# 	line-height: 40px;
# 	font-family: 'Orienta', sans-serif;
# 	text-align: center;
# }
# 
# h3 {
# 	margin: 1em 0 0.5em 0;
# 	color: #343434;
# 	font-size: 22px;
# 	line-height: 40px;
# 	font-weight: normal;
# 	text-transform: uppercase;
# 	font-family: 'Orienta', sans-serif;
# 	letter-spacing: 1px;
# 	font-style: italic;
# }
# 
#     </style>
# </head>
# <body>
# <h1>PLACEMENT PREDICTION</h1>
# 
# <h3>{{ pred }}</h3>
# 
# <div class="prediction">
#     <h2>Placement Prediction : {{ res }}</h2>
# 
# </div>
# </body>
# </html>

"""**Create app.py file**"""

from flask import Flask, render_template, request
import pickle
import pandas as pd
import numpy as np
from sklearn.preprocessing import StandardScaler
from sklearn.pipeline import Pipeline

app = Flask(__name__, template_folder='/content/template')
model_name = open('/content/final_log_reg_model.pkl','rb')
svm_model=pickle.load(model_name)


@app.route('/')
def home():
    return render_template("home.html")



@app.route('/send', methods=['GET','POST'])
def predict():
    if request.method == "POST" :

        Gender = request.form['gender']
        ssc_p = request.form['ssc_p']
        hsc_p = request.form['hsc_p']
        hsc_s = request.form['hsc_s1']
        degree_p = request.form['degree_p']
        degree_t = request.form['degree_t1']
        workex = request.form['workex1']
        etest_p = request.form['etest_p']
        specialisation = request.form['specialisation1']
        mba_p = request.form['mba_p']


        if Gender == 'M':
            gender = 0
        else:
            gender = 1


        if degree_t == 'Sci&Tech':
            degree_t1 = 2
        elif degree_t == 'Comm&Mgmt':
            degree_t1 = 0
        else:
            degree_t1 = 1

        if workex == 'Yes':
            workex1 = 1
        else:
            workex1 = 0

        if hsc_s == 'Commerce':
            hsc_s1 = 1
        elif hsc_s == 'Science':
            hsc_s1 = 2
        else:
            hsc_s1 = 0

        if specialisation == 'Mkt&HR':
            specialisation1 = 1
        else:
            specialisation1 = 0

        Pred_args=[gender,ssc_p,hsc_p,hsc_s1,degree_p,degree_t1,workex1,etest_p,specialisation1,mba_p]
        pred_args=np.array(Pred_args)
        pred_args=pred_args.reshape(1,-1)

        y_pred=svm_model.predict(pred_args)
        y_pred=y_pred[0]
        if y_pred == 0:
            return render_template('show.html',res="Work Hard!!! Chances are less")
        else:
            return render_template('show.html',res=" You are Doing well!! You Will Get placements")





if __name__ == '__main__':
    app.run()

